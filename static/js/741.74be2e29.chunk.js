"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[741],{1913:function(e,t,n){n.d(t,{Df:function(){return l},M1:function(){return d},TP:function(){return u},tx:function(){return p},z1:function(){return o}});var r=n(5861),a=n(8683),s=n(7757),c=n.n(s),i=n(5294).Z.create({baseURL:"https://api.themoviedb.org/3/",params:{}});i.interceptors.request.use((function(e){return e.params=(0,a.Z)({api_key:"8b67a89c3b3cf87de76d1484537ca872",include_adult:!1,language:"en-US"},e.params),e}));var l=function(){var e=(0,r.Z)(c().mark((function e(t){var n,r,a,s,l;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.get("trending/movie/day",{params:t});case 2:return n=e.sent,r=n.data,a=r.results,s=r.total_pages,e.next=8,x(a);case 8:return l=e.sent,e.abrupt("return",{movies:l,total_pages:s});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o=function(){var e=(0,r.Z)(c().mark((function e(t){var n,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.get("search/movie",{params:t});case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=(0,r.Z)(c().mark((function e(t){var n,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.get("movie/".concat(t),{params:{append_to_response:"videos,credits"}});case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=(0,r.Z)(c().mark((function e(t){var n,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.get("movie/".concat(t,"/credits"));case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=(0,r.Z)(c().mark((function e(t,n){var r,a,s,l;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.get("movie/".concat(t,"/reviews"),{params:n});case 2:return r=e.sent,a=r.data,s=a.results,l=a.total_pages,e.abrupt("return",{results:s,total_pages:l});case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),f=function(){var e=(0,r.Z)(c().mark((function e(){var t,n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.get("genre/movie/list");case 2:return t=e.sent,n=t.data,e.abrupt("return",n.genres);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=function(){var e=(0,r.Z)(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=JSON.parse(localStorage.getItem("genres"))){e.next=6;break}return e.next=4,f();case 4:n=e.sent,localStorage.setItem("genres",JSON.stringify(n));case 6:return e.abrupt("return",t.map((function(e){return(0,a.Z)((0,a.Z)({},e),{},{genres:e.genre_ids.map((function(e){return n.find((function(t){return t.id===e})).name})).join(", ")})})));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},6804:function(e,t,n){var r=n(184);t.Z=function(e){var t=e.text;return(0,r.jsx)("div",{className:"grow h-32 flex items-center justify-center",children:(0,r.jsx)("p",{className:"text-lg",children:t})})}},8911:function(e,t,n){n.d(t,{$w:function(){return s},mr:function(){return a},p6:function(){return r}});var r=function(e){return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})},a=function(e){var t=Math.floor(e/60),n=e%60;return"".concat(t,"h ").concat(n,"min")},s=function(e){return new Intl.DisplayNames(["en"],{type:"language"}).of(e)}},3741:function(e,t,n){n.r(t),n.d(t,{default:function(){return N}});var r=n(8683),a=n(5861),s=n(9439),c=n(7757),i=n.n(c),l=n(2791),o=n(7689),u=n(1913),d=n(8911),p=n(184),f=function(e){var t=e.rating,n=e.votes;return(0,p.jsxs)("div",{className:"flex items-center w-full",children:[(0,p.jsx)("div",{className:"bg-[url('/src/images/star-empty.svg')] bg-[length:auto_100%] bg-repeat-x w-full aspect-[293/28]","aria-label":"Rating is ".concat(t," out of 10"),children:(0,p.jsx)("div",{style:{width:"".concat(10*t,"%")},className:"bg-[url('/src/images/star-full.svg')] bg-[length:auto_100%] bg-repeat-x h-full w-0"})}),(0,p.jsxs)("div",{className:"hidden min-[375px]:block shrink-0 self-end text-white/70",children:[(0,p.jsx)("span",{className:"inline-block text-4xl leading-none",children:"/"}),(0,p.jsxs)("span",{className:"text-nowrap leading-none",children:[n.toLocaleString("en-US")," votes"]})]})]})},x=function(e){var t=e.onClick;return(0,p.jsxs)("button",{onClick:t,className:"absolute z-10 top-0 p-4 transition-opacity opacity-50 hover:opacity-100",children:[(0,p.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-16 h-16",children:(0,p.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 15 3 9m0 0 6-6M3 9h12a6 6 0 0 1 0 12h-3"})}),(0,p.jsx)("span",{className:"absolute bottom-4 left-2",children:"back"})]})},m=function(e){var t=e.videoKey,n=e.onModalClose;(0,l.useEffect)((function(){var e=function(e){"Escape"===e.key&&n()};return document.querySelector("html").classList.add("no-scroll"),document.addEventListener("keydown",e),function(){document.querySelector("html").classList.remove("no-scroll"),document.removeEventListener("keydown",e)}}),[n]);return(0,p.jsxs)("div",{className:"bg-black/70 z-20 fixed inset-0 w-full h-full animate-[fade-in_300ms_ease-out]",onClick:function(e){e.target===e.currentTarget&&n()},children:[(0,p.jsx)("div",{className:"relative aspect-video max-h-full m-auto top-1/2 -translate-y-1/2",children:(0,p.jsx)("iframe",{className:"w-full h-full",title:"YouTube Video",src:"https://www.youtube.com/embed/".concat(t,"?autoplay=1&rel=0"),allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}),(0,p.jsx)(x,{onClick:n})]})},h=n(2408),g=function(e){var t,n=e.backdrop_path,r=e.budget,a=e.credits,c=e.genres,i=e.homepage,o=e.original_language,u=e.overview,x=e.poster_path,g=e.production_companies,v=e.production_countries,w=e.release_date,j=e.revenue,b=e.runtime,y=e.tagline,N=e.title,k=e.videos,_=e.vote_average,S=e.vote_count,Z=e.children,L=(0,l.useState)(!1),C=(0,s.Z)(L,2),U=C[0],T=C[1],B=function(){T((function(e){return!e}))},M=null===(t=k.results.find((function(e){return"Trailer"===e.type})))||void 0===t?void 0:t.key,R=a.crew.filter((function(e){return"Director"===e.job})).map((function(e){return e.name})).join(", ");return(0,p.jsx)("div",{style:{backgroundImage:"url('https://image.tmdb.org/t/p/original".concat(n,"')")},className:"bg-no-repeat bg-center bg-[length:auto_100%]",children:(0,p.jsxs)("div",{className:"bg-gray-950/75 lg:bg-transparent lg:bg-gradient-to-r from-gray-950 via-gray-950/65 to-gray-950",children:[(0,p.jsxs)("div",{className:"container pt-[72px] pb-4 flex flex-wrap justify-center gap-y-6 items-start sm:justify-between",children:[(0,p.jsx)("div",{className:"logos flex flex-wrap gap-2 w-full justify-center",children:g.map((function(e){var t=e.id,n=e.logo_path,r=e.name;return(0,p.jsx)("div",{className:"bg-white/90 h-9 py-1 px-4",children:n?(0,p.jsx)("img",{className:"h-full",src:"https://image.tmdb.org/t/p/w300".concat(n),alt:"".concat(r)}):(0,p.jsx)("span",{className:"flex items-center max-w-full h-full text-center text-gray-900 text-xs font-bold tracking-tighter uppercase leading-none",children:r})},t)}))}),(0,p.jsxs)("div",{className:"title lg:w-5/12 lg:order-3",children:[(0,p.jsx)("h2",{className:"text-4xl font-bold tracking-tight",children:w?N+" (".concat(w.slice(0,4),")"):N}),y&&(0,p.jsx)("p",{className:"inline-block mt-1 italic",children:y}),(0,p.jsxs)("div",{className:"info mt-4 text-white/70",children:[Boolean(b)&&(0,p.jsxs)("span",{children:[d.mr(b)," | "]}),w&&(0,p.jsxs)("span",{children:[d.p6(w)," | "]}),(0,p.jsx)("span",{children:v.map((function(e){var t=e.name;return"United States of America"===t?"USA":t})).join(", ")})]}),(0,p.jsx)("p",{className:"mt-4",children:u})]}),(0,p.jsxs)("div",{className:"poster relative flex flex-col gap-y-4 sm:w-6/12 sm:order-4 lg:w-3/12",children:[Boolean(_)&&(0,p.jsx)(f,{rating:_,votes:S}),(0,p.jsx)("img",{className:"rounded-lg",src:x?"https://image.tmdb.org/t/p/w500".concat(x):h,alt:N}),M&&(0,p.jsxs)("button",{onClick:B,className:"absolute -bottom-4 left-1/2 -translate-x-1/2 sm:-left-4 sm:translate-x-0 flex p-4 gap-2 items-center justify-end bg-rose-600 rounded-tl-xl rounded-br-xl overflow-hidden w-[72px] transition-[width] group hover:w-36",type:"button",children:[(0,p.jsx)("span",{className:"text-2xl shrink opacity-0 transition-opacity group-hover:opacity-100",children:"Trailer"}),(0,p.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-10 h-10 shrink-0",children:(0,p.jsx)("path",{fillRule:"evenodd",d:"M4.5 5.653c0-1.427 1.529-2.33 2.779-1.643l11.54 6.347c1.295.712 1.295 2.573 0 3.286L7.28 19.99c-1.25.687-2.779-.217-2.779-1.643V5.653Z",clipRule:"evenodd"})})]})]}),(0,p.jsxs)("div",{className:"info flex flex-wrap w-full gap-x-6 gap-y-4 sm:flex-col sm:w-5/12 lg:w-3/12 lg:text-right",children:[0!==c.length&&(0,p.jsxs)("div",{className:"genres w-full",children:[(0,p.jsx)("h3",{className:"uppercase text-white/50 font-bold mb-2",children:"Genres"}),(0,p.jsx)("ul",{className:"flex flex-wrap gap-x-4 gap-y-2 text-gray-900 lg:justify-end",children:c.map((function(e){var t=e.id,n=e.name;return(0,p.jsx)("li",{className:"bg-white/90 rounded-full px-3 font-semibold",children:n},t)}))})]}),(0,p.jsxs)("div",{className:"language",children:[(0,p.jsx)("h3",{className:"uppercase text-white/50 font-bold",children:"Language"}),(0,p.jsx)("p",{className:"text-xl",children:d.$w(o)})]}),Boolean(r)&&(0,p.jsxs)("div",{children:[(0,p.jsx)("h3",{className:"uppercase text-white/50 font-bold",children:"Budget"}),(0,p.jsxs)("p",{className:"text-xl",children:["$",r.toLocaleString("en-US")]})]}),Boolean(j)&&(0,p.jsxs)("div",{children:[(0,p.jsx)("h3",{className:"uppercase text-white/50 font-bold",children:"Income"}),(0,p.jsxs)("p",{className:"text-xl",children:["$",j.toLocaleString("en-US")]})]}),i&&(0,p.jsxs)("div",{className:"max-w-full",children:[(0,p.jsx)("h3",{className:"uppercase text-white/50 font-bold",children:"Homepage"}),(0,p.jsx)("a",{href:i,target:"_blanc",className:"text-xl underline break-words",children:i.split("//")[1]})]}),R&&(0,p.jsxs)("div",{children:[(0,p.jsx)("h3",{className:"uppercase text-white/50 font-bold",children:"Director"}),(0,p.jsx)("p",{className:"text-xl",children:R})]})]}),U&&(0,p.jsx)(m,{videoKey:M,onModalClose:B})]}),Z]})})},v=n(1087),w=function(e){var t=e.tabs,n=e.tabsRef,r=(0,o.TH)();return(0,p.jsx)("ul",{ref:n,className:"container flex flex-wrap gap-x-12 text-white/50 text-lg font-bold",children:t.map((function(e,t){var n;return(0,p.jsx)("li",{className:"",children:(0,p.jsx)(v.OL,{to:e,state:{from:null===(n=r.state)||void 0===n?void 0:n.from},className:"relative inline-block py-4 uppercase transition-colors hover:text-white aria-[current=page]:text-white after:h-1 after:scale-0 after:absolute after:inset-x-0 after:bottom-0 after:rounded after:bg-rose-600 after:transition-transform aria-[current=page]:after:scale-100",children:e})},t)}))})},j=n(405),b=n(6804),y=["cast","reviews"],N=function(e){var t=e.tabsRef,n=(0,l.useState)(null),c=(0,s.Z)(n,2),d=c[0],f=c[1],m=(0,l.useState)(!1),h=(0,s.Z)(m,2),v=h[0],N=h[1],k=(0,l.useState)(""),_=(0,s.Z)(k,2),S=_[0],Z=_[1],L=(0,o.s0)(),C=(0,o.TH)(),U=(0,o.UO)().movieId;(0,l.useEffect)((function(){if(U){var e=function(){var e=(0,a.Z)(i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,N(!0),e.next=4,(0,u.TP)(U);case 4:t=e.sent,f(t),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),Z("Something went wrong...");case 11:return e.prev=11,N(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,8,11,14]])})));return function(){return e.apply(this,arguments)}}();e()}}),[U]);return(0,p.jsxs)("main",{className:"grow flex flex-col",children:[(0,p.jsx)("div",{className:"container relative top-12",children:(0,p.jsx)(x,{onClick:function(){var e,t;L(null!==(e=null===(t=C.state)||void 0===t?void 0:t.from)&&void 0!==e?e:"/")}})}),d?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(g,(0,r.Z)((0,r.Z)({},d),{},{children:(0,p.jsx)(w,{tabs:y,tabsRef:t})})),(0,p.jsx)("div",{className:"min-h-72 flex flex-col container pt-8 pb-12",children:(0,p.jsx)(l.Suspense,{fallback:(0,p.jsx)(j.Z,{}),children:(0,p.jsx)(o.j3,{})})})]}):v?(0,p.jsx)(j.Z,{}):S&&(0,p.jsx)(b.Z,{text:S})]})}},2408:function(e,t,n){e.exports=n.p+"static/media/no-image-movie.f5aab7f9c1fb5622e0ad.png"}}]);
//# sourceMappingURL=741.74be2e29.chunk.js.map