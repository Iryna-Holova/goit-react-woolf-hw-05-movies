"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[517],{1913:function(e,t,r){r.d(t,{Df:function(){return i},M1:function(){return d},TP:function(){return l},tx:function(){return f},z1:function(){return c}});var n=r(5861),a=r(8683),s=r(7757),o=r.n(s),u=r(5294).Z.create({baseURL:"https://api.themoviedb.org/3/",params:{}});u.interceptors.request.use((function(e){return e.params=(0,a.Z)({api_key:"8b67a89c3b3cf87de76d1484537ca872",include_adult:!1,language:"en-US"},e.params),e}));var i=function(){var e=(0,n.Z)(o().mark((function e(t){var r,n,a,s,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.get("trending/movie/day",{params:t});case 2:return r=e.sent,n=r.data,a=n.results,s=n.total_pages,e.next=8,x(a);case 8:return i=e.sent,e.abrupt("return",{movies:i,total_pages:s});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c=function(){var e=(0,n.Z)(o().mark((function e(t){var r,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.get("search/movie",{params:t});case 2:return r=e.sent,n=r.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=(0,n.Z)(o().mark((function e(t){var r,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.get("movie/".concat(t),{params:{append_to_response:"videos,credits"}});case 2:return r=e.sent,n=r.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=(0,n.Z)(o().mark((function e(t){var r,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.get("movie/".concat(t,"/credits"));case 2:return r=e.sent,n=r.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=(0,n.Z)(o().mark((function e(t,r){var n,a,s,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.get("movie/".concat(t,"/reviews"),{params:r});case 2:return n=e.sent,a=n.data,s=a.results,i=a.total_pages,e.abrupt("return",{results:s,total_pages:i});case 7:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),p=function(){var e=(0,n.Z)(o().mark((function e(){var t,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.get("genre/movie/list");case 2:return t=e.sent,r=t.data,e.abrupt("return",r.genres);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=function(){var e=(0,n.Z)(o().mark((function e(t){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=JSON.parse(localStorage.getItem("genres"))){e.next=6;break}return e.next=4,p();case 4:r=e.sent,localStorage.setItem("genres",JSON.stringify(r));case 6:return e.abrupt("return",t.map((function(e){return(0,a.Z)((0,a.Z)({},e),{},{genres:e.genre_ids.map((function(e){return r.find((function(t){return t.id===e})).name})).join(", ")})})));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},1517:function(e,t,r){r.r(t),r.d(t,{default:function(){return y}});var n=r(8683);function a(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},s=Object.keys(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var s=r(5861),o=r(9439),u=r(7757),i=r.n(u),c=r(2791),l=r(7689),d=r(1913),f=r(6631),p=r(8911),x=r(184),m=function(e){var t=e.id,r=e.author,n=e.author_details.avatar_path,a=e.content,s=e.created_at,u=(0,c.useState)(!1),i=(0,o.Z)(u,2),l=i[0],d=i[1],m=(0,c.useState)(!1),h=(0,o.Z)(m,2),g=h[0],v=h[1],b=(0,c.useRef)(null),w=(0,c.useRef)(null);(0,c.useEffect)((function(){w.current.offsetHeight>140&&d(!0)}),[]);var y=function(){v((function(e){return!e})),f.E(b.current)};return(0,x.jsxs)("li",{ref:b,className:"relative flex flex-col sm:flex-row sm:gap-4 bg-gray-700 p-4 mb-8 last:mb-0 rounded-xl text-lg group",children:[n?(0,x.jsx)("div",{className:"shrink-0 size-[100px] mx-auto mb-2 bg-gray-800 rounded-full overflow-hidden",children:(0,x.jsx)("img",{src:"https://image.tmdb.org/t/p/w300".concat(n),alt:"User avatar",className:"object-cover w-full h-full"})}):(0,x.jsx)("svg",{className:"shrink-0 size-[100px] mx-auto mb-2 text-gray-800","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20",children:(0,x.jsx)("path",{d:"M10 0a10 10 0 1 0 10 10A10.011 10.011 0 0 0 10 0Zm0 5a3 3 0 1 1 0 6 3 3 0 0 1 0-6Zm0 13a8.949 8.949 0 0 1-4.951-1.488A3.987 3.987 0 0 1 9 13h2a3.987 3.987 0 0 1 3.951 3.512A8.949 8.949 0 0 1 10 18Z"})}),(0,x.jsxs)("div",{className:"flex-grow flex flex-col gap-y-4",children:[(0,x.jsxs)("div",{className:"flex flex-col items-center sm:flex-row justify-between",children:[(0,x.jsx)("h3",{className:"font-bold",children:r}),(0,x.jsx)("span",{className:"text-white/50",children:p.p6(s)})]}),(0,x.jsx)("p",{ref:w,className:l?"text-white/80 overflow-hidden hyphens-auto "+(g?"transition-[max-height] duration-500 ease-out-expo max-h-[3000px]":"max-h-[140px]"):"text-white/80 hyphens-auto ",children:a})]}),l&&(g?(0,x.jsx)("button",{onClick:y,className:"bg-gray-600/50 absolute -bottom-6 translate-x-1/2 right-1/2 p-4 rounded-full transition-colors hover:bg-gray-600/80",type:"button",children:(0,x.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:(0,x.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 15.75 7.5-7.5 7.5 7.5"})})}):(0,x.jsx)("button",{onClick:y,className:"absolute bottom-0 left-0 w-full h-20 pt-6 rounded-xl bg-gradient-to-t from-gray-700 via-gray-700 to-transparent pointer",type:"button",children:(0,x.jsx)("span",{className:"text-base font-bold group-hover:animate-pulse",children:"See more..."})}))]},t)},h=r(6995),g=[1,2,3,4,5],v=function(){return(0,x.jsxs)("div",{role:"status",children:[(0,x.jsx)("span",{className:"sr-only",children:"Loading..."}),g.map((function(e){return(0,x.jsxs)("div",{className:"animate-pulse flex flex-col sm:flex-row sm:gap-4 bg-gray-700 p-4 mb-8 last:mb-0 rounded-xl",children:[(0,x.jsx)("svg",{className:"shrink-0 size-[100px] text-gray-800 mx-auto mb-2","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20",children:(0,x.jsx)("path",{d:"M10 0a10 10 0 1 0 10 10A10.011 10.011 0 0 0 10 0Zm0 5a3 3 0 1 1 0 6 3 3 0 0 1 0-6Zm0 13a8.949 8.949 0 0 1-4.951-1.488A3.987 3.987 0 0 1 9 13h2a3.987 3.987 0 0 1 3.951 3.512A8.949 8.949 0 0 1 10 18Z"})}),(0,x.jsxs)("div",{className:"flex-grow flex flex-col gap-y-8",children:[(0,x.jsxs)("div",{className:"flex flex-col gap-y-3 items-center sm:flex-row justify-between",children:[(0,x.jsx)("div",{className:"h-2.5 bg-gray-200 rounded-full w-40"}),(0,x.jsx)("div",{className:"h-2.5 bg-gray-500 rounded-full w-36"})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("div",{className:"h-2 bg-gray-400 rounded-full w-11/12 mb-4"}),(0,x.jsx)("div",{className:"h-2 bg-gray-400 rounded-full mb-4"}),(0,x.jsx)("div",{className:"h-2 bg-gray-400 rounded-full mb-4"}),(0,x.jsx)("div",{className:"h-2 bg-gray-400 rounded-full w-11/12 mb-4"}),(0,x.jsx)("div",{className:"h-2 bg-gray-400 rounded-full w-1/2"})]})]})]},e)}))]})},b=r(6804),w=["id"],y=function(e){var t=e.tabsRef,r=(0,c.useState)(null),u=(0,o.Z)(r,2),p=u[0],g=u[1],y=(0,c.useState)(1),j=(0,o.Z)(y,2),N=j[0],k=j[1],Z=(0,c.useState)(0),S=(0,o.Z)(Z,2),_=S[0],C=S[1],L=(0,c.useState)(!1),O=(0,o.Z)(L,2),P=O[0],M=O[1],B=(0,c.useState)(""),A=(0,o.Z)(B,2),E=A[0],I=A[1],U=(0,l.UO)().movieId;(0,c.useEffect)((function(){if(U){var e=function(){var e=(0,s.Z)(i().mark((function e(){var r,n,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,I(""),M(!0),e.next=5,d.tx(U,{page:N});case 5:r=e.sent,n=r.results,a=r.total_pages,n.length?(g(n),C(a),f.E(t.current)):I("No reviews for this movie"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),I("Something went wrong...");case 14:return e.prev=14,M(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[0,11,14,17]])})));return function(){return e.apply(this,arguments)}}();e()}}),[U,N,t]);return(0,x.jsx)(x.Fragment,{children:p?(0,x.jsxs)("div",{className:"flex flex-col gap-y-6",children:[(0,x.jsx)("ul",{className:P?"animate-pulse pointer-events-none":"",children:p.map((function(e){var t=e.id,r=a(e,w);return(0,x.jsx)(m,(0,n.Z)({},r),t)}))}),_>1&&(0,x.jsx)(h.Z,{totalPages:_,activePage:N,onPageChange:function(e){k(e)}})]}):P?(0,x.jsx)(v,{}):E&&(0,x.jsx)(b.Z,{text:E})})}},6804:function(e,t,r){var n=r(184);t.Z=function(e){var t=e.text;return(0,n.jsx)("div",{className:"grow h-32 flex items-center justify-center",children:(0,n.jsx)("p",{className:"text-lg",children:t})})}},6995:function(e,t,r){var n=r(184);t.Z=function(e){var t=e.totalPages,r=e.activePage,a=e.onPageChange,s=function(){var e=1,n=t;t>5&&(r<=3?n=5:r>=t-2?e=t-4:(e=r-2,n=r+2));for(var a=[],s=e;s<=n;s++)a.push(s);return a}(),o=1!==r&&r-1,u=r!==t&&r+1;return(0,n.jsxs)("div",{className:"flex flex-wrap justify-center gap-1 sm:justify-between",children:[(0,n.jsx)("div",{className:"w-full flex gap-x-2 justify-center sm:w-auto",children:s.map((function(e){return(0,n.jsx)("button",{disabled:e===r,className:"relative h-10 w-10 select-none rounded-lg text-xs font-medium transition-colors hover:bg-gray-700 focus:bg-gray-700 disabled:bg-gray-900 disabled:pointer-events-none",type:"button",onClick:function(){return a(e)},children:(0,n.jsx)("span",{className:"absolute transform -translate-x-1/2 -translate-y-1/2 top-1/2 left-1/2",children:e})},e)}))}),(0,n.jsxs)("button",{disabled:Boolean(!o),className:"flex gap-x-2 px-6 py-3 text-xs font-bold uppercase transition-colors rounded-lg select-none hover:bg-gray-700 disabled:pointer-events-none disabled:opacity-50 sm:-order-1",type:"button",onClick:function(){return a(o)},children:[(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true",className:"w-4 h-4",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18"})}),"Previous"]}),(0,n.jsxs)("button",{disabled:Boolean(!u),className:"flex gap-x-2 px-6 py-3 text-xs font-bold uppercase transition-colors rounded-lg select-none hover:bg-gray-700 disabled:pointer-events-none disabled:opacity-50",type:"button",onClick:function(){return a(u)},children:["Next",(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true",className:"w-4 h-4",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3"})})]})]})}},8911:function(e,t,r){r.d(t,{$w:function(){return s},mr:function(){return a},p6:function(){return n}});var n=function(e){return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})},a=function(e){var t=Math.floor(e/60),r=e%60;return"".concat(t,"h ").concat(r,"min")},s=function(e){return new Intl.DisplayNames(["en"],{type:"language"}).of(e)}}}]);
//# sourceMappingURL=517.221c4182.chunk.js.map